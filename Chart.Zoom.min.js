/*!
 * Chart.Zoom.js
 * http://chartjs.org/
 * Version: 0.1.3
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Zoom.js/blob/master/LICENSE.md
 */
!function t(e,n,a){function o(r,l){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!l&&u)return u(r,!0);if(i)return i(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[r]={exports:{}};e[r][0].call(c.exports,function(t){var n=e[r][1][t];return o(n?n:t)},c,c.exports,t,e,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}({1:[function(t,e,n){},{}],2:[function(t,e,n){function a(t,e){return void 0===t||"string"==typeof t&&t.indexOf(e)!==-1}function o(t,e,n){}function i(t,e,n){var a,o,i=t.options;t.isHorizontal()?(a=t.right-t.left,o=(n.x-t.left)/a):(a=t.bottom-t.top,o=(n.y-t.top)/a);var r=1-o,l=a*(e-1),u=l*o,s=l*r;i.time.min=t.getValueForPixel(t.getPixelForValue(t.firstTick)+u),i.time.max=t.getValueForPixel(t.getPixelForValue(t.lastTick)-s)}function r(t,e,n){var a=t.max-t.min,o=a*(e-1),i=t.isHorizontal()?n.x:n.y,r=(t.getValueForPixel(i)-t.min)/a,l=1-r,u=o*r,s=o*l;t.options.ticks.min=t.min+u,t.options.ticks.max=t.max-s}function l(t,e,n){var a=D[t.options.type];a&&a(t,e,n)}function u(t,e,n){var o=t.chartArea;n||(n={x:(o.left+o.right)/2,y:(o.top+o.bottom)/2});var i=t.options.zoom;if(i&&g.getValueOrDefault(i.enabled,y.zoom.enabled)){var r=g.getValueOrDefault(t.options.zoom.mode,y.zoom.mode);g.each(t.scales,function(t,o){t.isHorizontal()&&a(r,"x")?l(t,e,n):a(r,"y")&&l(t,e,n)}),t.update(0)}}function s(t,e,n){var a=t.chart.data.labels,o=a.length-1,i=Math.max(t.ticks.length-(t.options.gridLines.offsetGridLines?0:1),1),r=n.pan.speed;console.log("panSpeed: "+r);var l=t.minIndex,u=Math.round(t.width/(i*r));x.panCumulativeDelta+=e,l=x.panCumulativeDelta>u?Math.max(0,l-1):x.panCumulativeDelta<-u?Math.min(o-i+1,l+1):l,x.panCumulativeDelta=l!==t.minIndex?0:x.panCumulativeDelta;var s=Math.min(o,l+i-1);t.options.ticks.min=a[l],t.options.ticks.max=a[s],F.addData(Math.abs(e),"panmove"),F.addData(Math.abs(x.panCumulativeDelta),"cumDelta"),F.addData(u,"step")}function c(t,e){var n=t.options;n.time.min=t.getValueForPixel(t.getPixelForValue(t.firstTick)-e),n.time.max=t.getValueForPixel(t.getPixelForValue(t.lastTick)-e)}function m(t,e){var n=t.options.ticks,a=t.start,o=t.end;n.reverse?(n.max=t.getValueForPixel(t.getPixelForValue(a)-e),n.min=t.getValueForPixel(t.getPixelForValue(o)-e)):(n.min=t.getValueForPixel(t.getPixelForValue(a)-e),n.max=t.getValueForPixel(t.getPixelForValue(o)-e))}function d(t,e,n){var a=V[t.options.type];a&&a(t,e,n)}function p(t,e,n){var o=t.options.pan;if(o&&g.getValueOrDefault(o.enabled,y.pan.enabled)){var i=g.getValueOrDefault(t.options.pan.mode,y.pan.mode);g.each(t.scales,function(o,r){o.isHorizontal()&&a(i,"x")&&0!==e?d(o,e,g.getValueOrDefault(t.options,y)):!o.isHorizontal()&&a(i,"y")&&0!==n&&d(o,n)}),t.update(0)}}function f(t){var e=t.scales;for(var n in e){var a=e[n];if(!a.isHorizontal())return a}}var v=t("hammerjs");v="function"==typeof v?v:window.Hammer;var h=t("chart.js");h="function"==typeof h?h:window.Chart;var g=h.helpers,x=h.Zoom=h.Zoom||{},F=window.rwkPro||{},D=x.zoomFunctions=x.zoomFunctions||{},V=x.panFunctions=x.panFunctions||{},y=x.defaults={pan:{enabled:!0,mode:"xy",speed:20,threshold:10},zoom:{enabled:!0,mode:"xy"}};x.zoomFunctions.category=o,x.zoomFunctions.time=i,x.zoomFunctions.linear=r,x.zoomFunctions.logarithmic=r,x.panFunctions.category=s,x.panFunctions.time=c,x.panFunctions.linear=m,x.panFunctions.logarithmic=m,x.panCumulativeDelta=0;var P={afterInit:function(t){g.each(t.scales,function(t){t.originalOptions=JSON.parse(JSON.stringify(t.options))}),t.resetZoom=function(){g.each(t.scales,function(t,e){var n=t.options.time,a=t.options.ticks;n&&(delete n.min,delete n.max),a&&(delete a.min,delete a.max),t.options=g.configMerge(t.options,t.originalOptions)}),g.each(t.data.datasets,function(t,e){t._meta=null}),t.update()}},beforeInit:function(t){var e=t.chart.ctx.canvas,n=t.options,a=g.getValueOrDefault(n.pan?n.pan.threshold:void 0,x.defaults.pan.threshold);if(n.zoom.drag)n.zoom.mode="x",e.addEventListener("mousedown",function(e){t._dragZoomStart=e}),e.addEventListener("mousemove",function(e){t._dragZoomStart&&(t._dragZoomEnd=e,t.update(0)),t.update(0)}),e.addEventListener("mouseup",function(e){if(t._dragZoomStart){var n=t.chartArea,a=f(t),o=t._dragZoomStart,i=Math.min(o.x,e.x),r=Math.max(o.x,e.x),l=r-i,s=n.right-n.left,c=1+(s-l)/s;l>0&&u(t,c,{x:l/2+i,y:(a.bottom-a.top)/2}),t._dragZoomStart=null,t._dragZoomEnd=null}});else{var o=function(e){var n=e.target.getBoundingClientRect(),a=e.clientX-n.left,o=e.clientY-n.top,i={x:a,y:o};e.deltaY<0?u(t,1.1,i):u(t,.909,i)};t._wheelHandler=o,e.addEventListener("wheel",o)}if(v){var i=new v.Manager(e);i.add(new v.Pinch),i.add(new v.Pan({threshold:a}));var r,l=function(e){var n=1/r*e.scale;u(t,n,e.center),r=e.scale};i.on("pinchstart",function(t){r=1}),i.on("pinch",l),i.on("pinchend",function(t){l(t),r=null});var s=null,c=null,m=function(e){if(null!==s&&null!==c){var n=e.deltaX-s,a=e.deltaY-c;s=e.deltaX,c=e.deltaY,p(t,n,a)}};i.on("panstart",function(t){s=0,c=0,m(t)}),i.on("panmove",m),i.on("panend",function(t){s=null,c=null,x.panCumulativeDelta=0}),t._mc=i}},beforeDatasetsDraw:function(t){var e=t.chart.ctx,n=t.chartArea;if(e.save(),e.beginPath(),t._dragZoomEnd){var a=f(t),o=t._dragZoomStart,i=t._dragZoomEnd,r=Math.min(o.x,i.x),l=Math.max(o.x,i.x),u=l-r;e.fillStyle="rgba(225,225,225,0.3)",e.lineWidth=5,e.fillRect(r,a.top,u,a.bottom-a.top)}e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()},afterDatasetsDraw:function(t){t.chart.ctx.restore()},destroy:function(t){var e=t.chart.ctx.canvas;e.removeEventListener("wheel",t._wheelHandler);var n=t._mc;n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"))}};h.pluginService.register(P)},{"chart.js":1,hammerjs:1}]},{},[2]);
