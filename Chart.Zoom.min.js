/*!
 * Chart.Zoom.js
 * http://chartjs.org/
 * Version: 0.1.3
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Zoom.js/blob/master/LICENSE.md
 */
!function t(e,n,o){function a(r,l){if(!n[r]){if(!e[r]){var s="function"==typeof require&&require;if(!l&&s)return s(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return a(n?n:t)},u,u.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(t,e,n){},{}],2:[function(t,e,n){function o(t,e){return void 0===t||"string"==typeof t&&t.indexOf(e)!==-1}function a(t,e,n){}function i(t,e,n){var o,a,i=t.options;t.isHorizontal()?(o=t.right-t.left,a=(n.x-t.left)/o):(o=t.bottom-t.top,a=(n.y-t.top)/o);var r=1-a,l=o*(e-1),s=l*a,c=l*r;i.time.min=t.getValueForPixel(t.getPixelForValue(t.firstTick)+s),i.time.max=t.getValueForPixel(t.getPixelForValue(t.lastTick)-c)}function r(t,e,n){var o=t.max-t.min,a=o*(e-1),i=t.isHorizontal()?n.x:n.y,r=(t.getValueForPixel(i)-t.min)/o,l=1-r,s=a*r,c=a*l;t.options.ticks.min=t.min+s,t.options.ticks.max=t.max-c}function l(t,e,n){var o=F[t.options.type];o&&o(t,e,n)}function s(t,e,n){var a=t.chartArea;n||(n={x:(a.left+a.right)/2,y:(a.top+a.bottom)/2});var i=t.options.zoom;if(i&&v.getValueOrDefault(i.enabled,y.zoom.enabled)){var r=v.getValueOrDefault(t.options.zoom.mode,y.zoom.mode);v.each(t.scales,function(t,a){t.isHorizontal()&&o(r,"x")?l(t,e,n):o(r,"y")&&l(t,e,n)}),t.update(0)}}function c(t,e){var n,o,a,i,r,l,s,c=t.options,u=t.chart.data.labels,d=u.indexOf(c.ticks.max)-u.indexOf(c.ticks.min),m=!0;t.isHorizontal()?(o=t.width-(t.paddingLeft+t.paddingRight),a=o/(d+1),console.log("innerWidth: "+o+", valueWidth: "+a),(t.options.gridLines.offsetGridLines&&m||t.maxIndex===t.minIndex&&m)&&(i+=a/2)):(r=t.height-(t.paddingTop+t.paddingBottom),l=r/(d+1),s=l+t.paddingTop,t.options.gridLines.offsetGridLines&&m&&(s+=l/2));var f=Math.abs(e)-a;console.log("delta: "+e+", valueWidth: "+a+", x : "+f),f>0&&(n+=e>0?-1:1,console.log("minIndex: "+n)),c.ticks.min=u[n],c.ticks.max=u[n+d]}function u(t,e){var n=t.options;n.time.min=t.getValueForPixel(t.getPixelForValue(t.firstTick)-e),n.time.max=t.getValueForPixel(t.getPixelForValue(t.lastTick)-e)}function d(t,e){var n=t.options.ticks,o=t.start,a=t.end;n.reverse?(n.max=t.getValueForPixel(t.getPixelForValue(o)-e),n.min=t.getValueForPixel(t.getPixelForValue(a)-e)):(n.min=t.getValueForPixel(t.getPixelForValue(o)-e),n.max=t.getValueForPixel(t.getPixelForValue(a)-e))}function m(t,e){var n=V[t.options.type];n&&n(t,e)}function f(t,e,n){var a=t.options.pan;if(a&&v.getValueOrDefault(a.enabled,y.pan.enabled)){var i=v.getValueOrDefault(t.options.pan.mode,y.pan.mode);v.each(t.scales,function(t,a){t.isHorizontal()&&o(i,"x")&&0!==e?m(t,e):!t.isHorizontal()&&o(i,"y")&&0!==n&&m(t,n)}),t.update(0)}}function p(t){var e=t.scales;for(var n in e){var o=e[n];if(!o.isHorizontal())return o}}var g=t("hammerjs");g="function"==typeof g?g:window.Hammer;var x=t("chart.js");x="function"==typeof x?x:window.Chart;var v=x.helpers,h=x.Zoom=x.Zoom||{},F=h.zoomFunctions=h.zoomFunctions||{},V=h.panFunctions=h.panFunctions||{},y=h.defaults={pan:{enabled:!0,mode:"xy",threshold:10},zoom:{enabled:!0,mode:"xy"}};h.zoomFunctions.category=a,h.zoomFunctions.time=i,h.zoomFunctions.linear=r,h.zoomFunctions.logarithmic=r,h.panFunctions.category=c,h.panFunctions.time=u,h.panFunctions.linear=d,h.panFunctions.logarithmic=d;var z={afterInit:function(t){v.each(t.scales,function(t){t.originalOptions=JSON.parse(JSON.stringify(t.options))}),t.resetZoom=function(){v.each(t.scales,function(t,e){var n=t.options.time,o=t.options.ticks;n&&(delete n.min,delete n.max),o&&(delete o.min,delete o.max),t.options=v.configMerge(t.options,t.originalOptions)}),v.each(t.data.datasets,function(t,e){t._meta=null}),t.update()}},beforeInit:function(t){var e=t.chart.ctx.canvas,n=t.options,o=v.getValueOrDefault(n.pan?n.pan.threshold:void 0,h.defaults.pan.threshold);if(n.zoom.drag)n.zoom.mode="x",e.addEventListener("mousedown",function(e){t._dragZoomStart=e}),e.addEventListener("mousemove",function(e){t._dragZoomStart&&(t._dragZoomEnd=e,t.update(0)),t.update(0)}),e.addEventListener("mouseup",function(e){if(t._dragZoomStart){var n=t.chartArea,o=p(t),a=t._dragZoomStart,i=Math.min(a.x,e.x),r=Math.max(a.x,e.x),l=r-i,c=n.right-n.left,u=1+(c-l)/c;l>0&&s(t,u,{x:l/2+i,y:(o.bottom-o.top)/2}),t._dragZoomStart=null,t._dragZoomEnd=null}});else{var a=function(e){var n=e.target.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,i={x:o,y:a};e.deltaY<0?s(t,1.1,i):s(t,.909,i)};t._wheelHandler=a,e.addEventListener("wheel",a)}if(g){var i=new g.Manager(e);i.add(new g.Pinch),i.add(new g.Pan({threshold:o}));var r,l=function(e){var n=1/r*e.scale;s(t,n,e.center),r=e.scale};i.on("pinchstart",function(t){r=1}),i.on("pinch",l),i.on("pinchend",function(t){l(t),r=null});var c=null,u=null,d=function(e){if(null!==c&&null!==u){var n=e.deltaX-c,o=e.deltaY-u;c=e.deltaX,u=e.deltaY,f(t,n,o)}};i.on("panstart",function(t){c=0,u=0,d(t)}),i.on("panmove",d),i.on("panend",function(t){c=null,u=null}),t._mc=i}},beforeDatasetsDraw:function(t){var e=t.chart.ctx,n=t.chartArea;if(e.save(),e.beginPath(),t._dragZoomEnd){var o=p(t),a=t._dragZoomStart,i=t._dragZoomEnd,r=Math.min(a.x,i.x),l=Math.max(a.x,i.x),s=l-r;e.fillStyle="rgba(225,225,225,0.3)",e.lineWidth=5,e.fillRect(r,o.top,s,o.bottom-o.top)}e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()},afterDatasetsDraw:function(t){t.chart.ctx.restore()},destroy:function(t){var e=t.chart.ctx.canvas;e.removeEventListener("wheel",t._wheelHandler);var n=t._mc;n&&(n.remove("pinchstart"),n.remove("pinch"),n.remove("pinchend"),n.remove("panstart"),n.remove("pan"),n.remove("panend"))}};x.pluginService.register(z)},{"chart.js":1,hammerjs:1}]},{},[2]);
